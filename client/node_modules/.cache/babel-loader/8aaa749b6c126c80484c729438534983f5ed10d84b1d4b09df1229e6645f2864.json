{"ast":null,"code":"var _jsxFileName = \"/Users/yarikmakoveev/Desktop/for_slavik/client/src/pages/LoginPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Form, Button, Container } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n  const validateForm = () => {\n    const newErrors = {};\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!email) {\n      newErrors.email = 'Email обязателен';\n    } else if (!emailRegex.test(email)) {\n      newErrors.email = 'Неверный формат email';\n    }\n    if (!password) {\n      newErrors.password = 'Пароль обязателен';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    try {\n      const response = await axios.post('http://localhost:3000/api/user/login', {\n        email,\n        password\n      });\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('role', response.data.role);\n      navigate('/');\n      window.location.reload();\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        setErrors({\n          email: 'Неверный email'\n        });\n      }\n      if (error.response && error.response.status === 401) {\n        setErrors({\n          password: 'Неверный пароль'\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    style: {\n      width: '50%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'black'\n      },\n      className: \"text-center mt-4\",\n      children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleLogin,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"formEmail\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          style: {\n            color: 'black'\n          },\n          children: \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0439 \\u043F\\u043E\\u0447\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0439 \\u043F\\u043E\\u0447\\u0442\\u044B\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          isInvalid: !!errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"formPassword\",\n        className: \"mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          style: {\n            color: 'black'\n          },\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          isInvalid: !!errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"mt-3\",\n        style: {\n          width: '100%'\n        },\n        variant: \"primary\",\n        type: \"submit\",\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"TbCsIamWGxXFPloLN88a2jXOzMo=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","axios","Form","Button","Container","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","errors","setErrors","navigate","validateForm","newErrors","emailRegex","test","Object","keys","length","handleLogin","e","preventDefault","response","post","localStorage","setItem","data","token","role","window","location","reload","error","status","className","style","width","children","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","Group","controlId","Label","Control","type","name","placeholder","value","onChange","target","isInvalid","Feedback","variant","_c","$RefreshReg$"],"sources":["/Users/yarikmakoveev/Desktop/for_slavik/client/src/pages/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Form, Button, Container } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\n\nconst LoginPage = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n\n  const validateForm = () => {\n    const newErrors = {};\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (!email) {\n      newErrors.email = 'Email обязателен';\n    } else if (!emailRegex.test(email)) {\n      newErrors.email = 'Неверный формат email';\n    }\n    if (!password) {\n      newErrors.password = 'Пароль обязателен';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const response = await axios.post('http://localhost:3000/api/user/login', {\n        email,\n        password,\n      });\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('role', response.data.role); \n      navigate('/'); \n      window.location.reload(); \n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        setErrors({ email: 'Неверный email' });\n      }\n      if (error.response && error.response.status === 401) {\n        setErrors({ password: 'Неверный пароль' });\n      }\n    }\n  };\n\n  return (\n    <Container className=\"mt-5\" style={{ width: '50%' }}>\n      <h2 style={{ color: 'black' }} className='text-center mt-4'>Авторизация</h2>\n      <Form onSubmit={handleLogin}>\n        <Form.Group controlId=\"formEmail\">\n          <Form.Label style={{ color: 'black' }}>Адрес электронной почты</Form.Label>\n          <Form.Control\n            type=\"email\"\n            name=\"email\"\n            placeholder='Введите адрес электронной почты'\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            isInvalid={!!errors.email}\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            {errors.email}\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group controlId=\"formPassword\" className=\"mt-2\">\n          <Form.Label style={{ color: 'black' }}>Пароль</Form.Label>\n          <Form.Control\n            type=\"password\"\n            name=\"password\"\n            placeholder='Введите пароль'\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            isInvalid={!!errors.password}\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            {errors.password}\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Button className=\"mt-3\" style={{ width: '100%' }} variant=\"primary\" type=\"submit\">\n          Войти\n        </Button>\n      </Form>\n    </Container>\n  );\n};\n\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}